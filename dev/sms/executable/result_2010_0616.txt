
June 16, 2010

#============================================
#with record
#query batch command: executable/query_syn.sh (r1410)
#query files:  executable/resultlog/2010_0616/query (r1410)
#log: executable/resultlog/2010_0616 (r1410)

selectivity	RawDB	MDB
0.01	0.101	0.838
0.05	0.084	1.553
0.1		0.092	2.239
0.2		0.114	2.817
0.5		0.167	4.150

#Explanation: 
#The selectivity in the query file for 2010_0615 test is totally opposite to the intention.
#Now, 
#good results: (1) the time trend with the selectivity works well.
#bad results: (1) MDB still takes too much time
#confusing parts: (1) for RawDB, the trend of 0.05 and 0.1 is not pretty good. 
#I guess this is because my selectivity calculation is just based on one data file, 
#I need to calculate this selectivity based on all the files contain m5 measurements  

#(1) materialization
#(2) Change value selectivity for simple query (compare the several methods)
#(3) Change value selectivity, change output format (did/record_id), simple condition
#(4) Fix value selectivity, change measurement selectivity, simple condition
#(6) Fix value/measurement selectivity, add aggregation
#(7) Fix value/measurement selectivity, change length of context chain

#============================================
#Code change: generate query:Change the value selectivity over all the tables containing some measurement   
#query batch command: executable/query_syn.sh 
#query files:  executable/resultlog/2010_0616_query_v2/query 
#log: executable/resultlog/2010_0616_query_v2

#Only output (did-recordid)
selectivity	RawDB	MDB
0.01	0.073	0.847
0.05	0.085	1.699
0.1		0.092	2.264
0.2		0.114	2.683
0.5		0.169	4.296

#Explanation
#(1) trend with the selectivity is good
#TODO: change the output format to see whether MDB still uses this much time

#Only output did
selectivity	RawDB	MDB		MDB1(MDB+without all oid)	MDB2(MDB1+view no distinct def)
0.01	0.067	0.842	0.21	0.202
0.05	0.067	1.677	0.502	0.444
0.1		0.067	2.131	0.607	0.5
0.2		0.068	2.643	0.807	0.582
0.5		0.072	4.204	1.381	0.949
#Explanation
#Good results: 
#(1) trend with the selectivity is good
#(2) RawDB only output did BETTER than RawDB outout(did-recordid) 
#Bad results: 
#(1) only output did does not improve the MDB performance, SOMETHING is wrong here, I need to check this
##
#MDB results
#MDB: use view def "non_agg_meas_view" (postprocess.sql)
#MDB1: use view def 1 "non_agg_meas_view_basic" (postprocess.sql)
#MDB2: use view def 2 "non_agg_meas_view_basic" (no distinct in the select clause of the view def.)(postprocess.sql)
#(1) MDB1 is better than MDB, 
#Reason: get rid of the oi_compress table in the view definition, this dramatically reduce the cost for join operation
#(2) MDB2 is better than MDB1
#Reason: the distinct keyword in the view def. brings more cost   




