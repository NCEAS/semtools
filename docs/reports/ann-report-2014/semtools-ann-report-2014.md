# Accomplishments

## What are the major goals of the project?
Data for ecological and environmental studies quantify, among other things, the distribution and abundance of organisms; the processes that influence biological populations, communities, and ecosystems; and the environmental and anthropogenic drivers of these processes. Scientists increasingly rely on accessing and analyzing these diverse data collected by cross-disciplinary communities of researchers to achieve synthetic, crosscutting insights into the environment that can address issues of fundamental importance to science and society. 

Despite these needs, discovering these data is difficult. The precision and recall of data searches in data repositories is not satisfactory even at current collection sizes. Data archives like the Knowledge Network for Biocomplexity (KNB), the National Biological Information Infrastructure (NBII) Metadata Clearinghouse, and the Global Change Master Directory (GCMD) rely on semi-structured metadata with fields containing largely natural-language descriptions to provide search and browsing capabilities and to allow human use and interpretation of the data.  These metadata enable simple keyword searches that return results generally related to the topics of interest, but they cannot be used to perform precise searches of the data archives. Ironically data sets with more extensive (natural language) metadata are included in search results simply due to the incidental mention of a term in an ancillary part of the metadata document. These extraneous results decrease the precision of the search, seriously reducing the efficiency in researchers’ finding the data they need. In addition, because natural-language metadata does not generally rely on controlled vocabularies, researchers typically classify their data sets using ad-hoc descriptive terms, reducing recall. Given the number of synonyms and overlapping terms used in scientific disciplines, searches frequently miss relevant data because the search terms do not exactly match the terms used to classify the documents.

The goals of this project are to utilize a semantic model of data and measurements in building new data management tools that can significantly improve data discovery and interpretation within ecology and environmental science.  These tools would include tools for producing semantic metadata and attaching it to ecological data set descriptions, server software to index and reason about this semantic metadata, which in turn is used to build semantic data discovery and integration services that improve scientist's ability to locate, interpret, and repurpose scientific data from large-scale repositories such as the KNB and DataONE.

## What was accomplished under these goals?

### Major Activities
__Activities 2008-2009.__ Activities during the first year of the project focused on the refinement of a core model for scientific observations (in collaboration with SONet), and on the development of a prototype semantic search system for Metacat. This prototype represents a proof-of-concept for semantic search approaches and allowed us to compare multiple search strategies.  As shown in Figure 1, we have added support to Metacat for storing and managing OWL-DL ontologies and semantic annotations, and for reasoning and search services to support different semantic-search strategies.

To implement these extensions to Metacat, we used approaches that exploit the use of formal reasoning over an ontology designed to facilitate the semantic description of scientific observations (OBOE). In our first implementation, the Jena API was used to access ontologies and ontology terms within Metacat, and Pellet was used to provide reasoning services over these ontologies (e.g., to compute class subsumption hierarchies and to ensure ontologies added to Metacat are consistent).  We also extended Metcat’s XML management capabilities with support for managing semantic annotations. Ontologies and annotations added to Metacat were assigned unique identifiers (URIs), allowing both to be easily accessed through external applications (e.g., Protégé).  Further, ontologies and annotations were versioned using this URL scheme. 

The Extensible Observation Ontology (OBOE) provides a high-level abstraction of scientific observations and measurements that facilitate the creation of domain-specific vocabularies for defining observation and measurement semantics. OBOE is represented using OWL-DL and enables data (or metadata) structures to be linked to domain-specific ontology concepts so that critical aspects of scientific observations can be documented—such as what kind of Entity was measured, which Characteristics of that entity were measured and by which Measurement Standards (e.g., kilograms/m^2), and what other observations provide Context for interpreting those measurements.  In our approach, semantic annotations were then used to map these critical parts of a scientific observation to the data instances that are stored in a data repository (see Figure 2).  

In addition to plain-text keyword search, we implemented three different search methodologies to investigate the utility of semantic methods for scientific data discovery: (i) simple term expansion against ontologies to broaden the search terms against the metadata corpus; (ii) term expansion against semantic annotations; and (iii) structured searches that pose queries against the components of an observation described via OBOE. 

__Activities 2009-2010.__ After focusing on the development of a prototype semantic search system for Metacat in the first year of the project, we’ve turned our attention to the process of actually annotating observational data so that it can be discovered using these specialized semantic search strategies. Through a weekly feedback loop between the PIs and development team, we created a new plug-in for the Morpho data management application that allows users to annotate packages and also to locate data packages that have previously been annotated. Morpho development has coincided with authoring a domain-specific ontology that effectively describes data collected at the Santa Barbara Coastal LTER (SBCOBOE).

At the core of our development was the Semtools API that can be used in both Metacat and Morpho for managing annotations and ontologies. The common features of the library provide an opaque interface for leveraging semantics. The abstracted and centralized API buffers us from the vagaries of rapidly evolving Knowledge Representation technologies. For instance, we were able to switch from Jena API to OWL API as the ontology management library without having to refactor other systems that were utilizing the existing Semtools API.

The Annotation Plugin for Morpho augments the existing data table view with a tabbed interface that highlights different aspects of the annotation process: Summary, Column, and Context. Given the complexity inherent in formally describing observational data, the team has tried to minimize confusion by keeping the focus of the annotation activity on the actual data table being annotated. Furthermore, we’ve adopted a fill-in-the-blank format for collecting the crucial facts that comprise a complete annotation. These self-explanatory, natural language sentences prompt the user for information and also provide built-in help. 

The search interface for locating annotated data packages has been directly informed by enhancements to the fill-in-the-blank approach. Sharing similar user interface motifs makes the transition from semantic data consumer to semantic data provider all the more natural. We expect users will initially interact with the plugin’s query facilities before tackling their own data as annotators.

The search interface strikes a balance between expressivity and simplicity. Inspired by a familiar “smart playlist” criteria building interface, the search panel can be used to create compound nested queries that maximize search precision, and reduce false positive matches. To complement search precision, we use result ranking to maintain broad recall with the “best” or “closest” matches appearing at the beginning of the search results. Having a solid interface for defining search criteria allows us to continue our focus on evaluating structured, ontology-based query strategies that exploit both explicit and inferred concept relationships. 

__Activities 2010-2011.__ During 2010-2011, project participants simultaneously advanced both our ontology development efforts and our semantic data processing tools.  Advances occurred in four principal areas: 1) development of a revised ontology for the Santa Barbara Coastal LTER data sets; 2) a new ‘MADLIB’ user interface approach to creating semantic data annotations; 3) advances to the semantic query plugin for the Metacat data repository system; and, 4) a new subsystem for materializing OBOE annotations as RDF graphs for use in Open Linked Data applications.

We produced a revised version of the ontology for the Santa Barbara Coastal (SBC) marine data sets that comprise one of the case studies driving Semtools work.  The new ontology reflects updates in the OBOE model itself to support the concept of ‘Measurement Types’, which are combinations of classes that bind together Entity, Characteristic, Measurement Standard, and Protocol classes to form a commonly used composite for use in annotations.  These Measurement Types make is easy to group concepts that are repeated used within a project such as the SBC LTER.  In addition, the new version of the SBC ontology now includes classes for a wider variety of data sets within SBC LTER, and has been refactored to separate spatial and temporal classes into their own ontologies that can be reused across projects.  Figure 4 shows a selection of classes from the SBC ontology being applied in an annotation to an SBC data set.  These types of annotations are serialized as XML documents that map the attributes in the SBC data set to the measured Characteristics found in the SBC ontology, and can be produced by the Morpho application and used by the Metacat semantic query plugin.

We have continued iterative development on the plugin for creating semantic annotations on data sets in Morpho. Figure 5 shows the user interface components in Morpho that we developed for choosing ontology classes.  For each attribute in a data set, users are asked to fill out a ‘Mad Lib’ style sentence that clarifies the Entity being measured, which characteristics of the Entity are measured, the units of the measurement, and the protocol.  This approach makes it clear how the ontology classes relate to the data attribute, and allow the user to choose each of the four OBOE facets separately.

Iterative development continued on the Metacat Semantic query plugin.  We created a prototype user interface (Figure 6) for constructing and submitting semantic queries to Metacat that also includes an option to combine keyword and spatial criteria for a multi-faceted search as we transition to an annotated metadata corpus.  Because of the detailed annotations that are available on data sets, we were able to create a faceted search that exploits ontology subsumption hierarchies to show which queries will produce results and which will not in the browse hierarchy.  Users can quickly find all of the data sets that measure a particular Characteristic, or they can find all of the data sets that contain measurements of particular Entities.

In addition, the query system allows users to query against the data instances as well as the annotations, which significantly increases the power of the search mechanism (Figure 7).  This approach lets users specify data range criteria as part of the query specification (e.g., Plant Mass 'greater than 10' Grams), which results in a result that can find data sets that have not only particular types of measurements, but also to further hone the query to those data sets that have data values within specified ranges. This capability was created by extending the Data Manager library – a utility developed over the years during other projects – to query the heterogeneous databases after auto-loading them into relational tables.
	
We also began work on a new system that allows us to fully materialize the information contained in metadata documents, data sets, ontologies, and the annotations that link them into an extended RDF graph that is compatible with the principals of the Linked Open Data approach.  To accomplish this, we used the semantic annotations to pull information from the EML metadata documents and from the data objects themselves to produce a fully materialized OBOE model containing both the ontology classes that are relevant to a particular data set, but also the data instances themselves.  This produces a very large OWL graph.  This OBOE instance model can be explored like any ontology and abstracts the structural differences between different data sets that may share a similar semantic model. The materialized OBOE model can be loaded into an RDF triple store and queried using SPARQL (we did a proof of concept using AllegroGraph and a small Kelp data set).  Our preliminary findings show that this approach will allow us to expose arbitrarily complex and heterogeneous data objects as part of the Linked Open Data cloud. However, we anticipate that the graphs containing instance data will be sufficiently large to be impractical to query within the constraints of typical triple stores, which is the reason we used our global-as-local mediation design for the semantic search system that we constructed. We will continue to explore the use of this alternative approach while simultaneously evaluating the scalability of the Linked Data approach over the next year.

__Activities 2011-2012.__ Activities in 2011-2012 focused on continued development, refinement, and refactoring of the OBOE model and extensions, development of ObsDB, a new web-based application for applying semantics to scientific data sets, and outreach activities about OBOE to various groups (see Outreach section).

Refactoring OBOE. The main project activity in the first half of the project year was refactoring both OBOE and the extension ontologies for marine coastal ecology and for juvenile migrant salmon data.  M. O'Brien and C. Jones revisited the top-level organization of OBOE, and determined that there was a need for shared concepts among extension ontologies for common areas such as the representation of space, time, taxa, and methods.  In conjunction with S. Bowers, they refactored OBOE and the extensions to allow for a modular set of classes that can be imported independently of one another and that may be usful to various extension ontologies. C. Jones then refactored the salmon ontology to use this new structure, and M. O'Brien regularized the SBC LTER extension to improve comparability between the extension and imported modules (e.g, spatial terms).  See Findings for a description of the resulting refactored structure.

ObsDB design and development. S. Bowers had 6 undergraduate student interns working on an initial release version of ObsDB, a new web-based application for applying semantics to scientific data sets.  ObsDB represents an approach to create a unified repository for ontologies, data tables, and semantic annotations.  The goal of this design and development work is to prototype a community-oriented site for management of observational data with explicit semantics attached.  See Findings for the list of features they've implemented in ObsDB.

__Activities 2012-2014.__ Activities in 2012-2014 have been minimal due to limited remaining resources available on the project, but we extended the project into these no-cost-extension years in order to move our prototype semantic annotation and search tools into production usage for data repositories that we are working with, mainly the KNB Data Repository and the DataONE Federation.  To accomplish this, we needed to overcome several implementation barriers that made it difficult to scale semantic search up for use across the hundreds of thousands of data sets available in DataONE.  The primary impediments to bringing smeantic search to scale were: 1) Given annotations across hundreds of GB of data, typical open source triple stores were unable to handle the number of triples needed to handle data queries, nor did they integrate with other SOLR-based search systems; 2) generating annotations for hundreds of thousands of data sets was intractible due to labor limitations; and, 3) producing a user interface that allowed researchers to precisely understand the implications of semantic annotations was difficult when subtle differences exist among measurement concepts. In these no-cost extension years, we undertook several projects to overcome these limitations.

First, to handle querying at scale and to integrate with the existing DataONE search system, we converted our semantic search system to utilize a SOLR index in combination with reasoners like JENA and Pellet that we utilized during the prototype phase. This allowed us to combine the large scale text¬based index and search systems deployed by KNB and DataONE with the semantic reasoning capabilities exposed by JENA and Pellet by deveoping the components shown in Figure 8.

Second, we reviewed existing standards for modeling semantic annotations including the Annotation Ontology (AO) and Open Annotation Ontology (OA) and found the community has mostly adopted the latter. Consequently, we developed a new OA-based annotation model to replace the original Semtools annotation used by the Metacat data repository for indexing semantic annotations about metadata resources.  These libraries will be released during the normal DataONE release cycle as part of their supported product lines. We generated documentation and presentation materials for DataONE review at both the Core Cyber Infrastructure Team meeting in Santa Barbara, CA (June 2014 ) and the all-hands meeting in Albuquerque, NM (September 2014), and used these materials to drive a review of the proposed semantic search system with the science community.

Third, we developed a new MetacatUI extension for exercising semantic search facets within the existing Metacat search capabilities that utilizes the SOLR-based search API above (Figure 9), and to display the results of annotations to research scientists for review and correction (Figure 10).
  
Finally, to streamline the annotation process, we developed a mechanism to leverage the extensive text metadata about entities and attributes available in the KNB and DataONE repositories to streamline the process of annotating data sets against the OBOE ontology. We developed a utility for automatically generating semantic annotations using attribute-level metadata (top box, Figure 8). Names, labels, definitions, and units are used to query BioPortal-hosted ontologies for relevant concept matches. Using existing BioPortal infrastructure and APIs allowed us to quickly prototype concept matching approaches and automated annotation generation. We are now better positioned to evaluate the effectiveness of semantic search - for both increased precision and recall  - across a broad corpus of metadata like that housed in the DataONE repository federation.

### Specific Objectives

Based on the goals above, our specific objectives were to produce effective semantic tools for ecological data management, including:

- A refined measurement-driven ontology framework for classifying data sets to improve search
- A semantic annotation toolset that allows scientists to classify research data using that ontology
- A semantic search system that utilizes those annotations to improve precision and recall of measurement-based data searches

We accomplished each of these specific objectives, as outlined in the results and outcomes sections below.

### Significant Results

__Findings 2008-2009.__ Our semantic search system in Metacat added the ability to store OWL-DL ontologies in addition to semantic annotations that link data set attributes to ontology terms. Our approach also extended Metacat to improve metadata search in multiple ways: (i) by expanding standard keyword searches with ontology term hierarchies; (ii) by allowing keyword searches to be applied to annotations in addition to traditional metadata; and (iii) by allowing more structured searches over annotations via ontology terms. We describe our implementation of these extensions, and compare and contrast these different types of search for a corpus of annotated documents. As data repositories continue to grow, these tools will be instrumental in helping scientists precisely locate and then interpret data for their research needs.

Figure 1 shows the primary components of our semantic-discovery framework. The bottom of Figure 1 consists of two simple, example data sets. Although different types of data are often used within ecological analysis (e.g., raster, GIS, etc.), data sets are predominantly tabular (relational) and denote sets of related observations and measurements that were either directly collected or were the result of aggregation or analysis. Although not obvious, the example data sets in Figure 2 contain largely similar information consisting of spatial locations divided into sub-locations (i.e., a plot or quadrat), fertilization treatment information, and weight measurements.

Metadata schemes such as the Ecological Metadata Language (EML) provide standard ways of describing implicit aspects of data sets.  In Figure 2, we show a fragment of EML for describing the ‘wt’ and ‘LL’ attributes of the data sets. EML can be used to represent the basic structural aspects of data—the number of attributes, their names, and their allowable values— but the semantics of the data set—the types of entities observed, the characteristics of these entities that were measured, and how these entities were observed in relation to each other—is either indirectly described (e.g., within the methods section of the metadata document) or are altogether missing. Natural-language metadata alone would not reveal the closely related semantics of the highlighted attributes from our sample data sets.

Semantic annotations extend EML by providing a mechanism to describe data set attributes in terms of OBOE concepts. An annotation is a formal structure, which represents a mapping from data set values to ontology instances (i.e., individuals), and an XML-based syntax was used in our first prototype to represent annotation mappings. As shown in Figure 2, we show two annotated attributes that: (i) represent observations of leaf-litter entities; (ii) measure the weight of leaf-litter (although using different weight characteristics); and (iii) use compatible but different measurement units (kilograms and grams).  Annotations were used to find all data sets related to a particular concept, to determine all of the concepts related to particular data set attributes, and to compare data sets based on their corresponding OBOE structures (which can facilitate data integration).  XML was used as an interchange format for representing annotations; in general, annotation providers would annotate data sets using higher-level metadata editors and interfaces provided through tools such as Morpho. 

A more detailed example showing the various XML syntaxes used for representing EML attributes (bottom), semantic annotations (middle), and an OBOE ontology extension (top) are shown in Figure 3. 

To improve overall precision and recall of Metacat searches we prototyped three new search strategies. 

Keyword-Based Term Expansion. In this approach, we “intercepted” keyword queries issued to Metacat and expanded them according to the term hierarchies of the stored ontologies. Specifically, if a given search keyword matched a class name (i.e., as specified by the rdf:label property of the class), then the search was expanded to include the synonyms of the class as well as the names of subclasses. This form of search alleviates the problem with simple keyword searches of not returning data sets described with synonyms or more specialized terms of the user-entered keywords. In our implementation, when a user enters a keyword search, Metacat located synonyms and corresponding subclasses for each keyword using an ontology manager.  The query was then augmented by Metacat with the expanded terms according to the given search constraints (i.e., whether terms should exactly match document terms and whether all given keywords must be present in a document) and executed against the current Metacat keyword search service.  	Although this strategy improved recall for documents that may have been omitted with simple keyword searching, it also caused additional false positives due to the addition of keywords. Thus, this approach generally increased recall, but not necessarily precision. Specifically, the set of metadata documents returned was always a superset of what was returned using the traditional Metacat keyword search. 

Annotation-Enhanced Term Expansion.  Semantic annotations allow individual data set attributes to be linked to one or more ontology classes.  By applying keyword searches only to annotations, search results could potentially improve precision by returning fewer false positives. In annotation-enhanced search, each search term was first expanded using the ontology similar to the keyword-based term expansion.  Here, when a search term matched an ontology class, we used the class and all subclasses to find matching annotations. An annotation was considered a match if it contained the corresponding classes according to the search constraints (see above). The metadata document linked to the matched annotation was returned by the search.  For example, a metadata description of a data attribute described textually as “counts of grasshoppers” was annotated as a “count per square meter” of “Romalea guttata” by linking the attribute to the ontology classes that define these concepts.  When the user searched for “grasshopper”, the term was expanded to “Romalea guttata” via the ontology’s class hierarchy, and the annotation linking the metadata attribute to the class “Romalea guttata” became a match. Since the annotation was linked to a specific attribute reference within the metadata, data sets containing comments about “grasshoppers” in other fields were not matched, improving precision.  Moreover, recall was improved due to matches facilitated by descending the ontology’s class hierarchy.

Observation-Based Structured Query. Though the annotation-enhanced term expansion approach limited search to the relevant portions of metadata that describe data content (via attribute annotations), it did not take advantage of observation and measurement structures and relationships. In the observation-based query approach, users  search for data sets via their observed entities (organism, site, etc.) and the characteristics and standards used to measure them. In an observation-based search, queries were specified by explicitly filling in an observation “template” where ontology classes were given for the observed entity, measurement characteristic, and measurement standard. To search for data sets containing tree lengths, we filled in an observation query template, using the tree class as the observed entity type and the length class as the measurement characteristic type. Search was performed by finding matches between the observation types of annotations and the query template, where a match included searching subclasses of the template classes. This type of search had both good recall – hitting all relevant data through appropriate use of term expansion – and good precision by exploiting the structure of OBOE annotations to find exactly the entity, characteristic, and context of interest to the user. 

These prototype search interfaces in Metacat were implemented rapidly to explore the implications of different search strategies.  Our next stage of development was to design an effective user interface for composing semantic queries and then to use the semantic search engine to execute those queries.

__Findings 2009-2010.__  In developing the Annotation Plugin for Morpho, we found that the inherent complexity of fully describing an observational data table begs for a compact visualization of the annotation in-progress. Graph-based representations of the annotation – used extensively in the SONet for illustrating OBOE – show promise for effectively conveying the structure of the observation model as applied to a specific data table. Moreover, the succinct fill-in-the-blank summaries of each observation and their relationship[s] to one another encourage a casual description that is in fact formally rigorous and adheres to our strict Entity/Characteristic/Standard/Protocol annotation mapping. We employed this same format in the search template used for observation-based structured searches.

Figure 1 shows a sample data set that has been partially annotated against the OBOE model. The biomass column ‘wt’ is annotated: “The WetBiomass of the GiantKelp was recorded in Grams.” 

Figure 2 graphs this annotation and also contextualizes the biomass observation Within a Subplot that is itself located Within a Plot. Context is an integral piece to the observation model as it determines how the data should be interpreted and analyzed.

Observation-Based Structured Query. With a corpus of well-described, fully annotated data packages, observation-based searches allow for very precise matching with a small likelihood of false positives commonly introduced by free-text descriptive fields used in keyword-only queries. By populating a template that specified the observed Entity, the Characteristic measured, the Standard (unit) for that measurement, and the Protocol used for collecting that measurement, a query could unambiguously target data tables that contained those observations. Context relationships could be specified to further restrict the packages returned.

Domain-specific ontologies. In order to evaluate the effectiveness of the Morpho Annotation Plugin, we developed an extension to the OBOE ontology and applied it to existing real-life datasets collected by the Santa Barbara Coastal LTER. O’Brien selected a subset of data that investigated the nitrogen supply in giant kelp forests. The ontology organized and formalized such concepts as the observation Entity (GiantKelp), Characteristic (WetBiomass), Measurement Standard (Gram), and Protocol (wet vs. dry methods). Applying concepts to observations captured in tabular data columns required a fairly comprehensive ontology. When annotating from the ontology, it is desirable to select the narrowest (most specific) concept available such that broad-concept searches can include all subclasses under that concept’s hierarchy. Axioms defined in domain ontologies can be exploited by reasoners during both annotation authoring and annotation searching. We used Pellet for inferring indirect class subsumption hierarchies and also to validate imported ontologies as being logically consistent.

__Findings 2010-2011.__ In developing the Morpho plugin for creating semantic annotations, we found that the semantic annotation process itself was relatively straightforward: we produced the XML document that maps ontology classes to data table attributes.  However, the user interface development was challenging because of the complexity of the scientific concepts that we were trying to present in a simple user interface.  The SBC ontology contained hundreds of Entities, Characteristics, Measurement Standards, and Protocols that were interrelated in a complex graph structure that was difficult to present and visualize.   In addition, the user interface needed to show each of the four facets of the OBOE ontology (Entity, Characteristic, MeasurementStandard, Protocol) for each of the attributes in the data set.  For even a simple data set with 15-20 attributes, this resulted in a large number of ontology classes that have to be chosen from specific subsets of OBOE extension ontologies.  Thus, we developed and tested the use of the ‘Mad Lib’ user interface approach shown in Figure 5.  We found that these ‘Mad Lib’ sentences were easy to understand, succinctly presented the ontological information regarding the attribute, and could be compactly displayed when the user selected each data set attribute.  In addition, each field of the MadLib dialog presented the user with a filtered view of the ontology, showing only compatible ontology terms that were relevant for that part of the annotation, thereby significantly reducing the complexity of the ontology shown during annotation.  Even with these advances, we found that users produced varying or inconsistent annotations for the same data files, which confounded their use in semantic search services.

Although the data query feature of the semantic query plugin seemed simple at first glance (selecting all observations with, for example, diameter less than 5 cm.), it was actually a complex and demanding feat for the heterogeneous data corpus.  In our system, each of the tens of thousands of data sets had their own idiosyncratic schemas, and therefore there was no uniform relational model that could be queried to select data values. Our extensions of the Data Manager Library allowed us to load each of the data sets into their own tables in a relational database, and then the semantic annotations allowed us to create appropriate SQL queries against the wide variety of schemas in the system.  Thus, the OBOE ontology became a common global view against which queries were written, and the query subsystem rewrote these queries as appropriate for the local view of each data schema.  The annotations thus allowed the native structure of each data set to be maintained while exposing the semantics of the data regardless of the structure of the local schemas.

This data query feature represents a simple but powerful form of data union/integration with the Data Manager library (Figure 7).  Currently, knowing that an attribute represents a measurement of a Characteristic of a particular Entity provides the notion that these measurements are the same/compatible, and therefore can be combined, although at the time we did not incorporate an evaluation of the Context of the measurement.  Thus, in following Figure 7, one can see that semantic annotations were used to drive local queries against two data sets with completely different schemas, but that the common semantics allowed us to produce a union data product that drew from the corresponding attributes in each of the heterogeneous data sets.  This was a powerful and general data subsetting and integration approach that can be applied to arbitrarily heterogeneous data sets as long as they have shared semantics that are expressed as annotations.  This finding substantiated that our main objectives of improving search were tractable using semantic annotations.

__Findings 2011-2012.__ OBOE Refactoring. Through the work on the JMX Salmon ontology and the SBC ontology, we saw that certain extension ontologies will want to import pertinent sections of the OBOE ontology rather than committing to the imports as all-or-nothing.  For instance, both the Salmon and SBC ontologies benefit from higher-level ecological, temporal, and spatial concepts.  However, the SBC ontology had more specific interest in chemistry concepts, whereas the Salmon work did not.  Therefore, we re-factored the structure of OBOE to allow for more modular ontology sections that can be imported only when needed by certain extension ontologies.  This general issue of having to import large ontologies to use just one or a few concepts from them is a major obstacle to ontology re-use, and one which we determined could be partially alleviated through modularization.  Nevertheless, the problem of cascading imports that have far reaching implications for knowledge modeling still is a significant issue for ontologies in general and for OBOE extension ontologies in particular.

OBOE was refactored to be comprised of the following ontologies:
1) oboe-core.owl - provided the core OBOE modeling constructs.
2) oboe-characteristics.owl - provided general terms for characteristics that are measured either quantitatively or qualitatively, including physical characteristics, behavioral characteristics, and administrative characteristics.
3) oboe-standards.owl - provided terms for measurement standards that are common across OBOE extensions  including units of measure and indices.
4) oboe-spatial.owl - provided terms relating to spatial concepts that are common across OBOE extensions.  The terms are derived from the International Standards Organization (ISO) geospatial standards in the 19100 series and from the Geography Markup Language version 3.2.1.
5) oboe-temporal.owl - provided terms relating to temporal concepts that are common across OBOE extensions.  The terms are derived from the International Standards Organization (ISO) geospatial standards in the 19100 series and from the Geography Markup Language version 3.2.1.

We then split out the more domain-relevant ontologies into modules as well, for import as needed:
6) oboe-chemistry - provided commonly used chemistry types in earth and environmental sciences.
7) oboe-taxa - provided taxonomic terms that are common across OBOE extensions.
8) oboe-biology - provided biological terms that are common across OBOE extensions.
9) oboe-ecology - provided ecological terms that are common across OBOE extensions.
10) oboe-environment - provided physical environment terms that are common across OBOE extensions.
11) oboe-anatomy - provided terms related to general anatomical concepts that are common across OBOE extensions.  The model is derived from the Common Anatomical Reference Ontology (CARO).

Lastly, if a project truly wanted all of the ontologies as a single import, we provided:
12) oboe.owl - A single ontology that imports all of the above.

The new ontology organization allowed for imports of all, some, or none of the OBOE work, which was important in ontology development, since as we can see with the SWEET ontology, importing (and accepting the semantics of) all terms in an ontology can be not only cumbersome, but also perhaps incorrect for the given application. These files are all in subversion here: https://code.ecoinformatics.org/code/semtools/trunk/dev/oboe/


ObsDB development. Prototype work on ObsDB was completed by S. Bowers and interns at Gonzaga University.  The ObsDB application provides the following features:
1) Allows for ontologies, tables (CSV files), and semantic annotations to be imported and stored within ObsDB
2) Supports a new annotation language, OAL, which uses a YAML-based syntax for fine-grained semantic annotations. The languages supports various constraints, and the ability to define value-based mappings into ontology individuals and classes
3) Supports a YAML syntax for defining oboe classes and constraints
4) Provides a table (CSV file) "shredder" that takes a CSV file, an annotation in OAL, and produces an RDF triple graph, which is stored internally using the Jena triple store technology. Uses the HermiT reasoner to classify and check consistency of the produced RDF graphs
5) Provides a specialized unit reasoner to determine when measurement units are compatible and/or convertible. The unit reasoner also applies unit conversions to measured values as well as conversions to measurement precision as needed
6) Supports a high-level query language for finding datasets that match observation/measurement types including context relations, as well as data-level conditions (e.g., tree heights greater than 10
meters). Also integrates the unit reasoner to automatically perform unit conversions (e.g., searching for datasets with Tree Diameter's in Feet, but finds datasets with convertible units, e.g., Tree Diameter's in Meters)
7) Supports "virtual" RDF graphs, that allow observations to be selected from different graphs stored in ObsDB (via queries) to create a heterogeneous collection of observations (i.e., taken from multiple
underlying tables)
8) Supports a number of basic analytical functions to be applied to observations collections (triple graphs), including simple aggregation (avg, min, max, range, count, median). Also allows external functions in R via scripts to be applied over observation collections (graphs).

__Findings 2012-2014.__ Depite limited resources during our two no-cost extension years, our primary objectives were to transition our previously successful prototyping efforts into a semantic search and annotation system that was robust enough to be deployed in production systems at the KNB Data Repository and the DataONE federation. 

To overcome scalability barriers, we re-implemented the semantic search system to use the SOLR search system in conjuntion with the previous reasoners that we had employed. We found that our semantic search user interface needed to remain simple, and that we could not expose the query power of SPARQL without significant usability issues for the researcher community. By pre-processing the semantic axioms that were found in our annotations, we were able to populate a SOLR index with only the key semantic information from the full knowlege model.  For example, the complex subsumption graph from the annotations and ontologies was distilled down to a simple concept membership index in SOLR, eliminating the need to real-time graph search algorithms, and instead making semantic search a simple lookup on a precomputed index.  This has allowed us to dynamically build the MetacatUI web interface via AJAX in real time as users add to the concept space of measurement parameters, and to dynamically handle concept lookahead as users type search terms in the user interface (Figure 9).  This dynamic, real-time interface was only possible because the semantic relationships were pre-indexed and did not rely on SPARQL at query time. We performed extensive usability testing on the search interface, and produced a much more complete search UI than the original prototype, one that can easily be customized to be used on any Metacat-based data repository. This user interface is now incorporated in the main Metacat data management application and can be enabled during configuration by any repository collecting annotations.

Our second major finding in 2014 was that the Open Annotation model makes an effective and extensible annotation mechanism for a variety of statements that researchers might want to make about a data set.  In our case, we are primarily using the annotation to describe measurements, but really any aspect of the data set can be annotated with OA.  Because these OA annotations are serialized in OWL, it is a simple matter to incorporate them into the same knowledge model as their associated ontologies, and thereby it makes it simple to fully materialize the all inferred axioms and incorporate these into our SOLR index.
  
Finally, we found that it was possible to generate useful semantic annotations by simply mining the natural language metadata that we already have for a given data set.  While these annotations are not always correct, on average we found that matching the textual metadata to the structured measurement ontologies allowed us to automatically infer measurement types for many data attributes, which in turn improves both recall and precision in measurement search as described above.  Consequently, we are now undertaking a full implementation of automated annotation generation under the DataONE project.  This will help overcome the massive barrier that had been present due to the labor required to manually annotate data sets.  In our new system, annotations will be initially generated by the automated matching algorithm, which will then in turn be confirmed, rejected, or refined through manual annotation by the data owner or a third party as needed.

### Key outcomes or other achievements

- We produced 13 papers and numerous presentations on the semantics of measurement search, building upon our prior foundational work on the use of ontologies for ecological and environmental science.

- We created 3 open source software tools meeting our specific project objectives.  These tools are distributed from their source code repositories:
    - Metacat semantic indexing and search extensions, with MetacatUI semantic search web interface
	- Morpho semantic annotation extensions
	- Semi-automated annotation generator

- We clarified that the problem of cascading imports has far reaching implications for knowledge modeling  and still is a significant issue for ontologies in general and for OBOE extension ontologies in particular. Overcoming this issue is critical to our community's ability to effectively build modular ontologies that can be re-used..

- We trained nine graduate students during the course of research

- The MetacatUI semantic search system has been incorporated into both the Metacat data repository system, and is being integrated into the DataONE software system.  Thus, it will be in production use in major environmental data repositories in the near future as prodcution releases of these software systems ship.


## What opportunities for training and professional development has the project provided?
Through Semtools, nine students have been supported and worked on the project under the direction of Shawn Bowers at Gonzaga University, in the process gaining valuable training in computer science research: Wesley Saunders, Josie Hunter, and Jay Kudo, along with 6 other student interns during the summer of 2012.

Jay Kudo worked on ObsDB, a system for uniformly storing and querying heterogeneous observational data. Wesley Saunders worked on a Protege plugin that simplifies the development of OBOE-compatible ontologies by providing a simple forms-based user interface for creating ontology subclasses and more complex measurement types. Josie Hunter is working on analyzing KNB data sets to determine and apply attribute similarity measures to assist in semi-automating dataset semantic annotations for datasets. This work helped efficiently provide partial annotations of existing datasets, which is a time-consuming aspect of the semantic software stack we developed.


## How have the results been disseminated to communities of interest?
Outreach activities for the project have principally been through our 13 publications, and through talks at scientific conferences and workshops where we have discussed our approaches to semantically modeling scientific observations and the benefits of doing so, and common use cases. O’Brien is consulting with SBC LTER ecologists and oceanographers in the development of the domain-specific ontology. We also have distributed our software products to the community through our source code repositories for our open source products, including Metacat, MetacatUI, Morpho, and DataONE repositories.

O'Brien introduced OBOE concepts and the Santa Barbara Coastal LTER OBOE extension to the LTER Network community through several venues: the Information Managers' Committee meetings, the Network Newsletter, "Databits", and the working group tasked with developing the Network controlled vocabulary. Her activities included a demonstration of semantics tools in development and an introduction to the mapping of OBOE concepts to attribute definitions in Ecological Metadata Language (EML). She is also involved in an LTER working groups of information managers and scientists tasked with developing a controlled vocabulary for datasets. Early phases of this effort are focused on simple term taxonomies, but considering ontological concepts at this stage will greatly enhance an extension of the LTER vocabulary into a full ontology in the future.

In June 2012, M. O'Brien attended a workshop of the International Long Term Ecological Research (ILTER) Network entitled “Semantic Approaches to Discovery of Multilingual ILTER Data” at the East China Normal University in Shanghai, China. The workshop was hosted by the Chinese Ecosystem Research Network (CERN)/National Ecosystem Research Network of China (CNERN) and brought together information managers from China, Israel, UK, Korea, Taiwan, Japan, and the US. O'Brien presented the OBOE core ontology and the SBC LTER extension, and discussed mechanisms in the ontology that could be applied to international queries. A paper is in preparation.

C. Jones gave two presentations at the Pacific Northwest Aquatic Monitoring Project's data Management Leadership Team meeting on February 21, 2012.  Participants included staff from the Oregon Department of Fish and Wildlife employees, USGS, Ecotrust, and Sitka Pacific Technologies (consultants to PNAMP). The first presentation was an overview of OBOE aimed at introducing the agency managers to observational ontologies. The discussion revolved around the applicability of observational ontologies in cross-agency monitoring efforts. The files are here: https://code.ecoinformatics.org/code/jmx/documents/presentations/20120221-cjones-pnamp-dmlt-oboe-salmon-overview.pdf

The second presentation was a more detailed look at the OBOE ontology itself, and the OBOE-Salmon extension ontology.  This was directed at a more technical audience, and we discussed how the specific concepts are encoded as XML structures in OWL.  The discussion revolved around the effort needed to integrate ontologies into the data workflow for the agencies, and how scientists in the community could and should become involved in defining the classes in the ontology.  The files are here:
https://code.ecoinformatics.org/code/jmx/documents/presentations/20120221-cjones-pnamp-dmlt-oboe-salmon-detail.pdf

Non-conference presentations on Semtools and SONet related work included:

O’Brien, M., Bowers, S., Jones, M., Schildhauer, M. and Leinfelder, B. 2010. SBC Extension of the OBOE Measurement Ontology. LTER Information Managers Committee Meeting, Kellogg Biological Station, Michigan State University, Sept 2010.

Jones, C., Schildhauer, M., Jones, M., O'Brien, M., Leinfelder, M., Bowers, S., Madin, J., Zimmerman, M. 2012. Using semantic technologies to help manage scientific data. Pacific Northwest Aquatic Monitoring Project Data Management Leadership Team meeting, February 21, 2012. 

Jones, C., Schildhauer, M., Jones, M., O'Brien, M., Leinfelder, M., Bowers, S., Madin, J., Zimmerman, M. 2012. An observational ontology for the salmon research community. Pacific Northwest Aquatic Monitoring Project Data Management Leadership Team meeting, February 21, 2012. 

# Products
## Conference Papers and Presentations
- W. Saunders, S. Bowers, M. O'Brien (2011). Protege Extensions for Scientist-Oriented Modeling of Observation and Measurement Semantics. Proc. of the International Workshop on OWL Experiences and Directions (OWLED). San Francisco, California. Status = PUBLISHED;  Acknowledgement of Federal Support = Yes

## Inventions
- Nothing to report.

## Journals
- Ben Leinfelder, Shawn Bowers, Margaret O’Brien, Matthew B. Jones, Mark Schildhauer (2011). Using Semantic Metadata for Discovery and Integration of Heterogeneous Ecological Data.  Proceedings of the Environmental Information Management Conference.   92. Status = PUBLISHED; Acknowledgment of Federal Support = Yes ; Peer Reviewed = Yes ; DOI: doi:10.5060/D2NC5Z4X
- Bowers, Shawn; Cao, Huiping; Schildhauer, Mark; Jones, Matt; Leinfelder, Ben (2010). A semantic annotation framework for retrieving and analyzing observational datasets. Proceedings of the Third Workshop on Exploiting Semantic Annotations in Information Retrieval.   31. Status = PUBLISHED; Acknowledgment of Federal Support = Yes ; Peer Reviewed = Yes ; DOI: doi:10.1145/1871962.1871982
- Chad Berkley, Shawn Bowers, Matthew B. Jones, Joshua S. Madin, Mark Schildhauer (2009). Improving Data Discovery for Metadata Repositories through Semantic Search. International Conference on Complex, Intelligent and Software Intensive Systems.   1152. Status = PUBLISHED; Acknowledgment of Federal Support = Yes ; Peer Reviewed = Yes ; DOI: doi:10.1109/CISIS.2009.122
- David Thau, Shawn Bowers, Bertram Ludäscher (2009). Merging Sets of Taxonomically Organized Data Using Concept Mappings under Uncertainty.  OTM Conferences. 2  1103. Status = PUBLISHED; Acknowledgment of Federal Support = Yes ; Peer Reviewed = Yes ; DOI: doi:10.1007/978-3-642-05151-7_26
- Huiping Cao, Shawn Bowers, Mark P. Schildhauer (2012). Database Support for Enabling Data-Discovery Queries over Semantically-Annotated Observational Data.  Lecture Notes in Computer Science. 7600  198. Status = PUBLISHED; Acknowledgment of Federal Support = Yes ; Peer Reviewed = Yes ; DOI: doi:10.1007/978-3-642-34179-3_7
- O'Brien, M. (2010). Using the OBOE Ontology to Describe Dataset Attributes.  LTER Databits. Fall  . Status = PUBLISHED; Acknowledgment of Federal Support = Yes ; Peer Reviewed = No ; DOI: http://databits.lternet.edu
- S. Bowers, J. Kudo, H. Cao, M. Schildhauer (2010). ObsDB: A system for uniformly storing and querying heterogeneous observational data.  Proc. of the IEEE International Conference on e-Science.   261. Status = PUBLISHED; Acknowledgment of Federal Support = Yes ; Peer Reviewed = Yes ; DOI: doi:10.1109/eScience.2010.24
- Shawn Bowers, Joshua S. Madin, Mark P. Schildhauer (2010). Owlifier: Creating OWL-DL ontologies from simple spreadsheet-based knowledge descriptions.  Ecological Informatics. 5 (1),  19. Status = PUBLISHED; Acknowledgment of Federal Support = Yes ; Peer Reviewed = Yes ; DOI: doi:10.1016/j.ecoinf.2009.08.010

## Licenses
- Nothing to report.

## Other Products
- Software or Netware.
    - Jones, M., Leinfelder B., Schildhauer, M., Bowers, S., O'Brien M. 2011. Semantic extensions to the Metacat data repository software system.  These extensions allow Metacat servers to index and search OWL-DL ontologies and annotations referencing heterogeneous data sources to improve data discovery.
- Software or Netware.
    - Jones, M., Leinfelder B., Schildhauer, M., Bowers, S., O'Brien M. 2011. Prototype semantic extensions to the Morpho metadata edior.  These extensions allow Morpho users to create and edit data set annotations that conform to OWL-DL ontologies and that can be used to improve data discovery.
## Other Publications
## Patents
- Nothing to report.
## Technologies or Techniques
- Nothing to report.
## Thesis/Dissertations
- Nothing to report.
## Websites
- Semtools - http://semtools.ecoinformatics.org
  The Semtools web site is used to describe project goals and accomplishments, disseminate this information to the broader community, and share working documents among project team members.

# Participants/Organizations

## What individuals have worked on the project?
- Jones, Matthew	PD/PI
- Bowers, Shawn	Co PD/PI
- Madin, Joshua	Co PD/PI
- OBrien, Margaret	Co PD/PI
- Schildhauer, Mark	Co PD/PI
- Leinfelder, Benjamin	Other Professional

## What other organizations have been involved as partners?

We have been collaborating with the Scientific Observations Network (SONet), which is an NSF-funded INTEROP project focused on advancing a core semantic model of scientific observations. Semtools is basing much of its development effort on the observation model being evaluated in the SONet project. Initially we are using the OBOE model as the core and building an annotation framework around that model. As the SONet project progresses we hope to produce a generic solution that allows interoperability with different observation models and ontology authoring approaches. The SONet team has provided valuable insight into authoring domain-specific ontologies and defining best-practices regarding ontology construction.

The Moore Foundation has provided funding for collaboration between NCEAS and the Juvenile Salmon Migrant Exchange network (JMX), which is trying to collate and integrate salmon migration data across hundreds of research units in the Pacific Northwest.  In this project, we have a half-time engineer who is developing a salmon migration ontology that can be used to describe all of the data originating from diverse research units spanning local, state, federal, tribal, academic, and non-governmental sectors.  Developing this ontology has played two critical roles in the project.  First, it has tremendous heuristic value in clarifying the subtle, nuanced differences in measurements being taken across projects.  Second, it is being used to annotate a collection of data sets from the Washington Department of Fish and Wildlife, which in turn allows the Semtools project to demonstrate the power of semantic search and semantic data integration for these diverse institutions.

DataONE Data Integration and Semantics Working Group. Co-PIs Schildhauer and O'Brien and PI Jones are collaborating with DataONE's semantics working group to develop an interoperable semantic data discovery application that focuses on ecohydrology as a use case.  Collaborators from Semtools, SONet, DataONE, CUASHI, and other projects are developing a semantically integrated data query system that illustrates the power of semantics in making heterogeneous data accessible for cross-cutting science use cases.  The ecohydrology use case will draw together water chemistry and biodiversity data from a variety of sources, including the CUASHI HIS system, the USGS NWIS system, the Santa Barbara Coastal LTER, and other sites.

EarthCube Semantics and Ontologies Activity. Semtools co-PI Schildhauer has established a collaboration with geoscience semantics researchers as part of the EarthCube Semantics and Ontologies Working Group.  This group is developing a vision and roadmap for the development and utility of semantics technologies within the geosciences.  Schildhauer helped to co-author the EarchCube Roadmap for semantics (see publications list for citation).

Semtools participants (Jones, Schildhauer, Bowers) have created the Joint Working Group on Observational Data Semantics with other participants from the DataONE, Data Conservancy, and SONet projects.  The purpose of this Joint Working Group is to identify and pursue synergies between the projects in observational data semantics.  We have held two workshops of the participants, which each resulted in a shared understanding of our varied models of observational data, as well as a joint commitment to compatible development.  Future activities of the joint working group will include an emphasis on a core mode for observational data semantics, an exchange syntax for moving data and their associated semantics across systems, and demonstration prototypes of interoperability that arises from this work.

# Impact

## What is the impact on the development of the principal discipline(s) of the project?
Through our work on Semtools, we have demonstrated improvements in the effectiveness of data discovery for large, heterogeneous data collections such as the Knowledge Network for Biocomplexity (KNB) and DataONE, an NSF-funded DataNet partner.  These advances have been possible through the use of a semantic model of scientific observations (Extensible Observation Ontology) and an annotation language that is used to map relational data sources to the concepts in OBOE.  The system that we developed will form the basis for a production semantic search and annotation system that will be deployed wihtin DataONE and will have broad applicability in the ecological and environmental sciences.

The other major impact was on ontology development within the environmental sciences.  Our development of the OBOE model, and our prototype work on using ontologies for data annotation, demonstrated how difficult it is to reach semantic clarity about envirnmental measurements.  The effort resulted in changes to other standards such as the Observations and Measurements standard, and had a large impact on the development of the Semantic Sensor Netork (SSN) ontology that was initially developed by the W3C.  The current movement within the ecological sciences to develop ontologies for organizing and formalizing what was observed and how provides the semtools team with a good opportunity to exchange ideas about creating these ontologies. Our initial work with OBOE and the Morpho Annotation Plugin has illuminated questions about how disparate ontologies must be unified without having to accept the axioms from any particular model, which is still a challenge in ontology engineering. 

Ultimately, as our annotation system is put into prodcution in the KNB and DataONE, we will have a large impact on the accessibility and utility of environmental data through as locating and synthesizing heterogeneous data sources will be more efficient, and downstream analysis more accurate.

## What is the impact on other disciplines?
The relative newness of knowledge representation and the use of ontologies to express and formalize information in a way that machines can ‘understand’ puts our real-life use of the technology at the forefront of the art. We are involved in the OWL API user community – a forum for both providing and soliciting support for the rapidly evolving software. Similarly, our extensive use of Protégé increases the user base directly and indirectly as we encourage collaborators to view and author domain ontologies within this application.  Our work on materializing scientific data sets as large OWL graphs using conventions from the Linked Open Data community also contributes to an understanding of the scalability of linked data approaches that transcends disciplines.

## What is the impact on the development of human resources?

## What is the impact on physical resources that form infrastructure?
Although the Semtools project itself will not produce physical infrastruture per se, its software will be deployed on the KNB Data Repository and the DataONE federation data servers, thereby having a large impact on the data search facilities that are available in the US and globally.

## What is the impact on institutional resources that form infrastructure?
Semtools semantic search technologies will have a major impact on the utility of environmental data repositories, and we expect it will help significantly improve the ability of non-profit operations like the KNB and DataONE to transition into useful, sustainable, and effective virtual organizations.  The utility of effective data management is growing in the environmental sciences, and Semtools software will enable data repositories to meet the needs of these virtual orgnaizations.  In addition, government agencies, including NSF, NOAA, NASA, and are increasingly under pressure to provide effective access to open data.  For NSF in particular, data heterogeneity is a huge barrier to distribution of open data resulting from NSF research. The semantic annotation and search systems that we have produced will be able to help NSF and other agencies to meet open data mandates.

## What is the impact on information resources that form infrastructure?
The project is helping to build the extensive Knowledge Network for Biocomplexity (KNB) repository, which provides tens of thousands of data sets for use in research and educational contexts.  Data from the KNB will become more accessible as the semantic search facilities that we have developed become incorporated into the production Metacat software used by the KNB.  This will enable educators and researchers to more readily access KNB data and therefore facilitate science and education advances in many disciplines. In addition, DataONE has also decided to incoporate Semtools semantic search software into the DataONE data search systems.  DataONE is a major information integrator for the whole NSF DataNet program, as it has provided a common discovery service across all 4 of the active DataNet partners (Minnesota Population Center (MPC), DataNet Federation Consorium( DFC), SEAD, and DataONE), and a total of 25 disctinct data partners and networks (including other data providers such as LTER, Dryad, the ORNL DAAC repository, the Alaska Ocean Observing System, and others).  As a consequence, Semtools software will have a large network effect as it gets applied to the hundreds of thousands of data sets available through the DataONE federation. 

## What is the impact on technology transfer?
- None

## What is the impact on society beyond science and technology?
Knowledge about science and the progress of science is critical to an effective society.  Advances in the Semtools project are producing new techniques for clarifying the content and meaning of scientific observations data to make it useful for tackling cross-cutting issues that are important to society.  The data that are exposed in this way become useful to many communities, including local governments and resource management agencies, non-profit organizations focused on conservation issues, and educators interested in exposing students to science approaches to societal issues.




